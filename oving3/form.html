<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title>
    <style>
        @import url('https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap');
        *{
            margin: 0;
            padding: 0;
            outline: none;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        body{
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 10px;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(115deg, lightgrey 10%, darkgrey 90%);
        }
        .container{
            max-width: 800px;
            background: #fff;
            width: 800px;
            padding: 25px 40px 10px 40px;
            box-shadow: 0px 0px 10px rgba(0,0,0,0.1);
        }
        .container h1{
            text-align: center;
        }
        .container form{
            padding: 30px 0 0 0;
        }
        .container form .form-row{
            display: flex;
            margin: 32px 0;
            justify-content: center;
        }
        .container form .form-element{
            display: flex;
            flex-direction: column;
            padding-left: 30px;
            padding-right: 30px;
        }
        .container form .form-btn {
            background-color: #adadad;
            border-radius: 13px;
            font-size: 14px;
            border-style: none;
            color: #FFFFFF;
            height: 40px;
            padding-left: 15px;
            padding-right: 15px;
            position: relative;
            text-align: center;
            transition: color 100ms;
        }
        .container form .form-btn:hover,
        .container form .form-btn:focus {
            background-color: #9c9c9c;
        }
        .image-preview {
            width: 150px;
            height: 150px;
            border: 2px solid #ddd;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            margin-bottom: 10px;
        }
        .image-preview img {
            max-width: 100%;
            max-height: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
    <h1>Assignment 3 Form</h1>
    <form>
        <div class="form-element">
            <span>* identifies a required field</span>
        </div>
        <div class="form-row">
            <div class="form-element">
                <label for="fname">First name:*</label><br>
                <input type="text" id="fname" name="fname" required><br>
            </div>
            <div class="form-element">
                <label for="lname">Last name:*</label><br>
                <input type="text" id="lname" name="lname" required><br>
            </div>
        </div>

        <div class="form-row">
            <div class="form-element">
                <label for="email">Email Address:*</label><br>
                <input type="email" id="email" name="email" required><br>
            </div>
            <div class="form-element">
                <label for="pswd">Password:*</label>
                <input type="password" id="pswd" name="pswd" minlength="8" required><br>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-element">
                <label for="tel">Phone Number:*</label><br>
                <input type="phone" id="phone" name="phone" placeholder="(123) 456-7890" pattern="\(\d{3}\)\s\d{3}-\d{4}" maxlength="14" required><br>
            </div>
            <div class="form-element">
                <label for="dob">Date of birth:*</label><br>
                <input type="date" id="dob" name="dob" required><br>
            </div>
        </div>

        <div class="form-element">
            <label for="country">Country of residence:*</label><br>
            <select id="country" name="country" required>
                <option value="no">Norway</option>
                <option value="se">Sweden</option>
                <option value="dk">Denmark</option>
                <option value="uk">United Kingdom</option>
                <option value="us">United States</option>
                <option value="other">Other</option>
            </select><br>
        </div>
        
        <div class="form-row">
            <div class="form-element">
                <legend>Gender identity:*</legend>
                <div>
                    <input type="radio" id="male" name="gender" value="Male" required>
                    <label for="male">Male</label>
                </div>
                <div>
                    <input type="radio" id="female" name="gender" value="Female" required>
                    <label for="female">Female</label>
                </div>
                <div>
                    <input type="radio" id="other" name="gender" value="Other" required>
                    <label for="other">Other</label>
                </div>
            </div>
            <div class="form-element">
                <legend>Any interests?</legend>
                <div>
                    <input type="checkbox" id="sports" name="interests" value="Sports" required>
                    <label for="sports">Sports</label>
                </div>
                <div>
                    <input type="checkbox" id="videogames" name="interests" value="Video Games" required>
                    <label for="videogames">Video Games</label>
                </div>
                <div>
                    <input type="checkbox" id="Studying" name="interests" value="Studying" required>
                    <label for="Studying">Studying</label>
                </div>
            </div>
        </div>
        
        <div class="form-element" style="padding-bottom: 30px;">
            <label for="comments">Any additional comments?</label><br>
            <textarea id="comments" name="comments" rows="3" cols="50">Leave comments here</textarea>
        </div>
        <div class="form-element" style="padding-bottom: 30px;">
            <label for="satisfaction">How satisfied are you with this form?*</label><br>
            <div style="display: flex; flex-direction: row; justify-content: space-between; width: 30%;">
                <span>1</span>
                <input type="range" id="satisfaction" name="satisfaction" min="1" max="10" required>
                <span>10</span><br>
            </div>
        </div>
        <div class="form-element">
            <label for="pfp">Upload a profile picture!</label><br>
            <div class="image-preview" id="imagePreview">
                <span>No image selected</span>
            </div>  
            <input type="file" name="pfp" id="mypfp" accept="image/*">
        </div>


        <div class="form-row" style="justify-content: space-evenly;">
            <input type="submit" value="Submit" class="form-btn">
            <input type="reset" value="Reset" class="form-btn">
        </div>

    </form>
    </div>
    <script>
        // Automatically filling in the format as the user types the phone number
        const phoneInput = document.getElementById('phone');

        phoneInput.addEventListener('input', function (e) {
            let input = e.target.value.replace(/\D/g, ''); // Remove all non-numeric characters
            let formattedInput = "";

            if (input.length > 0) {
                formattedInput += "(" + input.substring(0, 3); // Area code
            }
            if (input.length >= 4) {
                formattedInput += ") " + input.substring(3, 6); // Prefix
            }
            if (input.length >= 7) {
                formattedInput += "-" + input.substring(6, 10); // Line number
            }

            e.target.value = formattedInput;
        });

        // Setting the date input max to 18 years ago on page load
        const birthdateInput = document.getElementById('dob');
        const today = new Date();
        const year = today.getFullYear() - 18;
        const month = String(today.getMonth() + 1).padStart(2, '0'); // Months are 0-based
        const day = String(today.getDate()).padStart(2, '0');
        
        // Set the max value to the date 18 years ago
        birthdateInput.max = `${year}-${month}-${day}`;

        // Displaying a preview of the uploaded profile image, should there be one.
        const fileInput = document.getElementById('mypfp');
        const imagePreview = document.getElementById('imagePreview');

        fileInput.addEventListener('change', function() {
            const file = this.files[0];
            if (file) {
                const reader = new FileReader();
                imagePreview.innerHTML = ""; // Clear previous content
                
                reader.onload = function(event) {
                    const imgElement = document.createElement('img');
                    imgElement.src = event.target.result;
                    imagePreview.appendChild(imgElement);
                };
                
                reader.readAsDataURL(file); // Read the file as a data URL
            } else {
                imagePreview.innerHTML = "<span>No image selected</span>"; // Reset preview if no file is selected
            }
        });
    </script>
</body>
</html>